<head>
<title>gl2f local files</title>
</head>

<body>

<span id='columns'></span>

<span id="table"></span>

<script src="index.js"></script>
<script type="text/javascript">
const f = {
	Date: (k, v)=>`${new Date(v['date']).toLocaleDateString()}`,
	Board: (k, v)=>`<a href='https://girls2-fc.jp/page/${v['board']}' target='_blank'>${v['board']}</a>`,
	Author : (k, v)=>`${v['author']}`,
	Title: (k, v)=>`<a href=album.html?${k}>${v['title']}</a>`,
};

function draw(){
	const columns = keys.filter(k=>document.getElementById(`col_${k}`).checked);
	document.getElementById("table").innerHTML = '<table>'
		+ '<tr>' +  columns.map(s=>`<th>${s}</th>`).join('') + '</tr>'
		+ Object.entries(table).map(
			([k, v])=>'<tr>'
				+ columns.map((c)=>`<td>${f[c](k, v)}</td>`).join('')
				+ '</tr>'
		).join('')
		+ '</table>';
};


const keys = Object.keys(f);

document.getElementById('columns').innerHTML = keys.map(
	k=>`<input id=col_${k} type='checkbox' checked>${k}</input>`
).join('');

keys.map(k=>document.getElementById(`col_${k}`))
.forEach(b=>b.addEventListener('change', draw));

draw();
</script>

</body>
